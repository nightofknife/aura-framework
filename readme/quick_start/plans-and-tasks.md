
---

### **第二部分：核心概念 (Core Concepts)**

#### **3. 方案与任务 (Plans & Tasks)**

---

# **核心概念：方案与任务**

在快速上手中，您已经创建了您的第一个方案和任务。现在，让我们深入理解这两个概念，它们是组织您所有自动化工作的基石。

### **方案 (Plan)**

您可以将一个“方案”想象成一个独立的**项目**或**插件**。它是一个自包含的目录，里面存放着为实现某个特定自动化目标（例如“自动化客户关系管理系统操作”或“每日财务报表生成”）所需的所有任务、配置文件和资源。

**一个方案的关键特征**:
*   **独立性**: `MyFinanceReport` 方案不应该知道或依赖 `MyCRMOps` 方案内部的任何东西。这使得您的自动化资产可以被清晰地组织起来。
*   **可移植性**: 您可以轻松地将整个方案文件夹（例如 `MyFinanceReport/`）分享给同事，或者在不同的 Aura 工作区之间迁移。
*   **结构约定**: 每个方案文件夹都遵循一个简单的内部结构，其中最重要的就是 `tasks/` 子目录。

**回顾一下我们的项目结构**:
```
MyAuraWorkspace/
└── plans/
    ├── MyFinanceReport/  <-- 这是一个方案
    │   └── tasks/
    │       ├── generate_report.yaml
    │       └── send_email.yaml
    │
    └── MyCRMOps/         <-- 这是另一个方案
        └── tasks/
            ├── login.yaml
            └── create_customer.yaml
```

### **任务 (Task)**

如果说方案是“项目”，那么“任务”就是项目中的一个具体的**工作流脚本**。它定义了一系列从头到尾的步骤，以完成一个特定的操作。

一个任务通常被定义在一个 `.yaml` 文件中。值得注意的是，**一个 `.yaml` 文件可以包含多个任务定义**。

```yaml
# plans/MyCRMOps/tasks/login.yaml

# 第一个任务定义
login:
  meta:
    title: "登录 CRM 系统"
    entry_point: true
  steps:
    # ... 登录步骤 ...

# 同一个文件中的第二个任务定义
logout:
  meta:
    title: "登出 CRM 系统"
  steps:
    # ... 登出步骤 ...
```

### **任务ID (Task ID)**

在 Aura 中，每个任务都有一个**全局唯一的ID**，这是框架用来精确查找和执行任务的“坐标”。它的格式如下：

`PlanName/path/to/taskfile/TaskName`

让我们通过例子来理解：
*   对于上面文件中的 `login` 任务，它的任务ID是：
    `MyCRMOps/tasks/login/login`
*   对于 `logout` 任务，它的任务ID是：
    `MyCRMOps/tasks/login/logout`

这个任务ID在后面的高级流程控制（如 `run_task` 和 `go_task`）中至关重要。

### **入口点 (`entry_point`)**

您可能已经注意到了 `meta` 块中的 `entry_point: true`。

一个“入口点”任务，是指一个**可以由用户直接启动的顶级任务**。只有设置了 `entry_point: true` 的任务，才会出现在 Aura UI 的可运行任务列表中。

**如何使用它？**
*   **设置为 `true`**: 对于那些代表一个完整业务流程的“主”任务，例如 `生成月度报告` 或 `执行完整的回归测试`。
*   **不设置或设置为 `false`**: 对于那些作为辅助功能的“子”任务，例如 `登录`、`登出`、`点击某个按钮`。这些任务通常不应该被用户单独运行，而是由其他任务通过 `run_task` 来调用。

通过合理地使用 `entry_point`，您可以让您的任务列表保持干净和专注，只暴露那些真正需要用户交互的任务。

---

